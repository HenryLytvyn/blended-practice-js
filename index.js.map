{"version":3,"file":"index.js","sources":["../src/js/products-api.js","../src/js/render-function.js","../src/js/refs.js","../src/js/helpers.js","../src/js/constants.js","../src/js/handlers.js","../src/home.js","../src/js/modal.js"],"sourcesContent":["// Функції для роботи з бекендом\n\nimport axios from 'axios';\n\nexport async function getAllProducts(currentPage) {\n  try {\n    const response = await axios.get(\n      `https://dummyjson.com/products?limit=12&skip=${(currentPage - 1) * 12}`\n    );\n    return response.data.products;\n  } catch (error) {\n    alert(error.message);\n  }\n}\n\nexport async function getProductById(id) {\n  try {\n    const response = await axios.get(`https://dummyjson.com/products/${id}`);\n    return response.data;\n  } catch (error) {\n    alert(error.message);\n  }\n}\n\nexport async function getProductByName(name) {\n  try {\n    const response = await axios.get(\n      `https://dummyjson.com/products/search?q=${name}`\n    );\n    return response.data;\n  } catch (error) {\n    alert(error.message);\n  }\n}\n\nexport async function getCategoriesList() {\n  try {\n    const response = await axios.get(\n      `https://dummyjson.com/products/category-list`\n    );\n    return response.data;\n  } catch (error) {\n    alert(error.message);\n  }\n}\n\nexport async function getProductsByCategory(currentPage, category) {\n  try {\n    const response = await axios.get(\n      `https://dummyjson.com/products/category/${category}?limit=12&skip=${\n        (currentPage - 1) * 12\n      }`\n    );\n    return response.data.products;\n  } catch (error) {\n    alert(error.message);\n  }\n}\n\nexport async function getTotalProductsAmount() {\n  try {\n    const response = await axios.get(`https://dummyjson.com/products`);\n    // console.log(response.data.total);\n    return response.data.total;\n  } catch (error) {\n    alert(error.message);\n  }\n}\n\nexport async function getCategoriesProductsAmount(category) {\n  try {\n    const response = await axios.get(\n      `https://dummyjson.com/products/category/${category}`\n    );\n    // console.log(response.data.products.length);\n    return response.data.products.length;\n  } catch (error) {\n    alert(error.message);\n  }\n}\n","//Функцію для створення, рендеру або видалення розмітки\n\nexport function renderCategories(arr) {\n  return arr\n    .map(\n      item => `<li class=\"categories__item\">\n   <button class=\"categories__btn\" type=\"button\">${item}</button>\n </li>\n`\n    )\n    .join('');\n}\n\nexport function renderCards(arr) {\n  return arr\n    .map(\n      ({ id, images, description, title, brand, category, price }) => `\n  <li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${images[0]}\" alt=\"${description}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand: ${brand}</span></p>\n    <p class=\"products__category\">Category: ${category}</p>\n    <p class=\"products__price\">Price: ${price}</p>\n </li>\n`\n    )\n    .join('');\n}\n\nexport function renderModalCard({ images, description, title, tags, price }) {\n  return `<img class=\"modal-product__img\" src=\"${images[0]}\" alt=\"${tags}\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${title}</p>\n        <ul class=\"modal-product__tags\">${tags}</ul>\n        <p class=\"modal-product__description\">${description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping:</p>\n        <p class=\"modal-product__return-policy\">Return Policy:</p>\n        <p class=\"modal-product__price\">Price: ${price}</p>\n        <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n      </div>\n`;\n}\n","//Обʼєкт з посиланнями на ДОМ елементи\n\nexport const refs = {\n  categories: document.querySelector('.categories'),\n  products: document.querySelector('.products'),\n  productsItem: document.querySelector('.products__item'),\n  categoriesBtn: document.querySelector('.categories__btn'),\n  modal: document.querySelector('.modal'),\n  modalProduct: document.querySelector('.modal-product'),\n  modalCloseBtn: document.querySelector('.modal__close-btn'),\n  notFound: document.querySelector('.not-found'),\n  loadMoreBtn: document.querySelector('.load-more__btn'),\n  loader: document.querySelector('.loader-js'),\n};\n","import {\n  getAllProducts,\n  getProductsByCategory,\n  getProductById,\n} from './products-api';\nimport { renderCards, renderModalCard } from './render-function';\n\nimport { refs } from './refs';\n\n// for handlers.js\nexport function toggleActiveCategory(categoryBtns, targetBtn) {\n  for (const categoryBtn of categoryBtns) {\n    if (\n      categoryBtn.firstElementChild.classList.contains(\n        'categories__btn--active'\n      )\n    ) {\n      categoryBtn.firstElementChild.classList.remove('categories__btn--active');\n      break;\n    }\n  }\n  targetBtn.classList.add('categories__btn--active');\n}\n\nexport function checkCategoryAvailability(array) {\n  if (!array.length) {\n    refs.notFound.classList.add('not-found--visible');\n  } else {\n    refs.notFound.classList.remove('not-found--visible');\n  }\n}\n\n// ================================================\n\nexport function getProducts(page, category) {\n  if (category === 'All') {\n    getAllProducts(page)\n      .then(response => {\n        checkCategoryAvailability(response);\n        refs.products.insertAdjacentHTML('beforeend', renderCards(response));\n      })\n      .catch(error => console.log(error.message));\n    return;\n  }\n\n  getProductsByCategory(page, category)\n    .then(response => {\n      checkCategoryAvailability(response);\n      refs.products.insertAdjacentHTML('beforeend', renderCards(response));\n    })\n    .catch(error => console.log(error.message));\n}\n\n//!================= LoadMore =================\n\nexport function hideLoadMoreButton() {\n  refs.loadMoreBtn.classList.add('visually-hidden');\n}\n\nexport function showLoadMoreButton() {\n  refs.loadMoreBtn.classList.remove('visually-hidden');\n}\n\n//!================= Loader =================\n\nexport function hideLoader() {\n  refs.loader.classList.remove('loader');\n}\n\nexport function showLoader() {\n  refs.loader.classList.add('loader');\n}\n\n//!================= Loader =================\n\nexport function errorNoMoreProducts() {\n  alert('No more products!');\n}\n","//Константи\n\nexport const STORAGE_KEYS = {};\nexport const startpage = 1;\n","// Функції, які передаються колбеками в addEventListners\n\nimport {\n  getAllProducts,\n  getCategoriesList,\n  getProductById,\n  getProductByName,\n  getProductsByCategory,\n  getTotalProductsAmount,\n  getCategoriesProductsAmount,\n} from './products-api';\n\nimport { renderCards, renderModalCard } from './render-function';\nimport {\n  toggleActiveCategory,\n  getProducts,\n  checkCategoryAvailability,\n  hideLoadMoreButton,\n  showLoadMoreButton,\n  showLoader,\n  hideLoader,\n  errorNoMoreProducts,\n} from './helpers';\n\nimport { refs } from './refs';\nimport { startpage } from './constants.js';\n\nlet currentCategory = 'All';\nlet currentPage = startpage;\nlet maxPage = 1;\n\n//!================= home.js =================\n\nexport function handleCategories(event) {\n  if (!event.target.classList.contains('categories__btn')) {\n    return;\n  }\n\n  currentPage = startpage;\n  refs.products.innerHTML = '';\n  const categoryBtns = Array.from(refs.categories.children);\n\n  toggleActiveCategory(categoryBtns, event.target);\n\n  currentCategory = event.target.textContent;\n\n  getProducts(startpage, currentCategory);\n\n  console.log(currentCategory);\n  console.log(checkMoreCategoriesProducts(currentCategory));\n\n  if (checkMoreCategoriesProducts(currentCategory) === currentPage) {\n    console.log('?');\n  } else {\n  }\n  // if (currentPage) showLoadMoreButton();\n}\n\n// ===========================================\n\nexport function handleLoadMore() {\n  currentPage++;\n  showLoader();\n\n  getProducts(currentPage, currentCategory);\n  checkMoreAllProducts();\n\n  hideLoader();\n}\n\nfunction checkMoreAllProducts() {\n  if (currentCategory === 'All') {\n    getTotalProductsAmount()\n      .then(response => {\n        maxPage = Math.ceil(Number(response) / 12);\n\n        if (currentPage >= maxPage) {\n          hideLoadMoreButton();\n          if (currentPage > 2) {\n            errorNoMoreProducts();\n          }\n        }\n      })\n      .catch(error => console.log(error.message));\n  } else {\n    checkMoreCategoriesProducts(currentCategory);\n  }\n}\n\nfunction checkMoreCategoriesProducts(currentCategory) {\n  getCategoriesProductsAmount(currentCategory)\n    .then(response => {\n      maxPage = Math.ceil(Number(response) / 12);\n\n      if (currentPage >= maxPage) {\n        hideLoadMoreButton();\n        if (currentPage > 2) {\n          errorNoMoreProducts();\n        }\n      }\n    })\n    .catch(error => console.log(error.message));\n}\n\n//!================= modal.js =================\n\nexport function handleOpenModal(event) {\n  if (event.target.classList.contains('products')) {\n    return;\n  }\n\n  const eventId = Number(event.target.closest('.products__item').dataset.id);\n\n  getProductById(eventId)\n    .then(response => {\n      refs.modalProduct.innerHTML = renderModalCard(response);\n      refs.modal.classList.add('modal--is-open');\n    })\n    .catch(error => console.log(error.message));\n}\n\n// ===========================================\n\nexport function handleCloseModal() {\n  refs.modal.classList.remove('modal--is-open');\n}\n","//Логіка сторінки Home\n\nimport {\n  getAllProducts,\n  getCategoriesList,\n  getProductById,\n  getProductByName,\n  getProductsByCategory,\n  getTotalProductsAmount,\n  getCategoriesProductsAmount,\n} from './js/products-api';\n\nimport { handleCategories, handleLoadMore } from './js/handlers';\nimport { renderCategories, renderCards } from './js/render-function';\nimport { refs } from './js/refs';\nimport { startpage } from './js/constants';\nimport { showLoadMoreButton } from './js/helpers';\n\nrefs.categories.addEventListener('click', handleCategories);\nrefs.loadMoreBtn.addEventListener('click', handleLoadMore);\n\ngetCategoriesList()\n  .then(response =>\n    refs.categories.insertAdjacentHTML(\n      'beforeend',\n      renderCategories([...['All'], ...response])\n    )\n  )\n  .catch(error => alert(error.message))\n  .finally(() => {\n    refs.categories.firstElementChild.firstElementChild.classList.add(\n      'categories__btn--active'\n    );\n  });\n\ngetAllProducts(startpage)\n  .then(response =>\n    refs.products.insertAdjacentHTML('beforeend', renderCards(response))\n  )\n  .catch(error => console.log(error.message));\n\n// showLoadMoreButton();\n\n// ==================== Load More ====================\ngetTotalProductsAmount();\ngetCategoriesProductsAmount('groceries');\n","//Описана робота модалки - відкриття закриття і все що з модалкою повʼязано\n\nimport { refs } from './refs';\nimport { handleOpenModal, handleCloseModal } from './handlers';\n\nimport {\n  getAllProducts,\n  getCategoriesList,\n  getProductById,\n  getProductByName,\n  getProductsByCategory,\n} from './products-api';\n\nimport { renderCards, renderModalCard } from './render-function';\n\nrefs.products.addEventListener('click', handleOpenModal);\nrefs.modalCloseBtn.addEventListener('click', handleCloseModal);\n"],"names":["getAllProducts","currentPage","axios","error","getProductById","id","getCategoriesList","getProductsByCategory","category","getTotalProductsAmount","getCategoriesProductsAmount","renderCategories","arr","item","renderCards","images","description","title","brand","price","renderModalCard","tags","refs","toggleActiveCategory","categoryBtns","targetBtn","categoryBtn","checkCategoryAvailability","array","getProducts","page","response","hideLoadMoreButton","hideLoader","showLoader","errorNoMoreProducts","startpage","currentCategory","maxPage","handleCategories","event","checkMoreCategoriesProducts","handleLoadMore","checkMoreAllProducts","handleOpenModal","eventId","handleCloseModal"],"mappings":"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"}